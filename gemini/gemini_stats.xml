<tool id="gemini_@BINARY@" name="GEMINI @BINARY@" version="@version@.0">
    <description>Compute useful variant statistics</description>
    <expand macro="requirements" />
    <expand macro="version_command" />
    <macros>
        <import>gemini_macros.xml</import>
        <token name="@BINARY@">stats</token>
    </macros>
    <command>
<![CDATA[
        gemini @BINARY@
            -i "${ infile }"
            > "${ outfile }"
]]>
    </command>
    <expand macro="stdio" />
    <inputs>
        <param name="infile" type="data" format="sqlite" label="GEMINI database" />

<!-- todo These options are mutually exclusive, or? -->

        <param name="tstv" type="boolean" truevalue="--tstv" falsevalue="" checked="False" 
            label="Compute the transition and transversion ratios for the snps" help="(--tstv)"/>

        <param name="tstv_coding" type="boolean" truevalue="--tstv-coding" falsevalue="" checked="False" 
            label="Compute the transition/transversion ratios for the snps in the coding regions" help="(--tstv-coding)"/>

        <param name="tstv_noncoding" type="boolean" truevalue="--tstv-noncoding" falsevalue="" checked="False" 
            label="Compute the transition/transversion ratios for the snps in the non-coding regions" help="(--tstv-noncoding)"/>

        <param name="snp_counts" type="boolean" truevalue="--snp-counts" falsevalue="" checked="False" 
            label="Compute the type and count of the snps" help="(--snp-counts)"/>

        <param name="sfs" type="boolean" truevalue="--sfs" falsevalue="" checked="False" 
            label="Calculate the site frequency spectrum of the variants" help="(--sfs)"/>

        <param name="mds" type="boolean" truevalue="--mds" falsevalue="" checked="False" 
            label="Compute the pair-wise genetic distance between each sample" help="(--mds)"/>

        <param name="vars_by_sample" type="boolean" truevalue="--vars-by-sample" falsevalue="" checked="False" 
            label="Return the total variants per sample (sum of homozygous and heterozygous variants)" help="(--vars-by-sample)"/>

    </inputs>
    <outputs>
        <data name="outfile" format="tabular" label="${tool.name} on ${on_string}" />
    </outputs>
    <tests>
        <test>
        </test>
    </tests>
    <help>
**What it does**

The stats tool computes some useful variant statistics for a GEMINI database.


$ gemini stats --summarize "select * from variants where in_dbsnp=1 and chrom='chr1'" my.db
sample  total   num_het num_hom_alt
M10475  1       1       0
M128215 1       1       0
M10478  2       2       0
M10500  2       1       1



@CITATION@
    </help>
    <expand macro="citations"/>
</tool>
