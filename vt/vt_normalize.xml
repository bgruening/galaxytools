<tool id="vt_@BINARY@" name="VT @BINARY@" version="@VERSION@.0">
    <description>normalizes variants in a VCF file</description>
    <expand macro="requirements" />
    <expand macro="version_command" />
    <macros>
        <import>vt_macros.xml</import>
        <token name="@BINARY@">normalize</token>
    </macros>
    <command>
<![CDATA[
        vt @BINARY@
            -o "${ outfile }"
            ##-q  do not print options and summary []
            -w  window size for local sorting of variants [10000]
            -I  $intervals_file
            ##-i  intervals []
            -r  $reference_genome
            "${ infile }"
]]>
    </command>
    <expand macro="stdio" />
    <inputs>
        <param name="infile" type="data" format="vcf" label="VCF file to be normalised" />

        <param name="reference_genome" type="select" label="Using reference genome">
              <options from_data_table="fasta_indexes">
                <filter type="data_meta" ref="infile" key="dbkey" column="1" />
                <validator type="no_options" message="No reference genome is available for the build associated with the selected input dataset" />
              </options>
        </param>

        <param name="intervals_file" type="data" format="bed" optional="True" label="File containing list of intervals" />
        <param name="window" type="integer" value="10000" size="10" label="Window size for local sorting of variants" 
            help="(-w)">
            <validator type="in_range" min="0"/>
        </param>

    </inputs>
    <outputs>
        <data name="outfile" format="vcf" label="${tool.name} on ${on_string}" />
    </outputs>
    <tests>
        <test>
        </test>
    </tests>
    <help>
**What it does**

Normalize variants in a VCF file. Normalized variants may have their positions changed; in such cases, 
the normalized variants are reordered and output in an ordered fashion. The local reordering takes place over a window of 10000 base pairs.

@CITATION@
    </help>
    <!--expand macro="citations"/-->
</tool>
