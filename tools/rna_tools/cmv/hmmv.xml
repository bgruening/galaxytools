<tool id="hmmv" name="hmmv" version="@VERSION@.1">
    <description>
        HMMV is a tool for visualization of hidden markov models (HMM)
    </description>
   <macros>
        <import>macros.xml</import>
    </macros>
    
    <expand macro="requirements" />

    <expand macro="stdio" />
    
    <expand macro="version" />
    <command><![CDATA[
    HMMV
    @COMMON_ARGS@
    -m $model_filepath
    -p `pwd`
    > 'warnings'   
    ]]></command>
    
    <inputs>
          <param name="model_filepath" type="data" format="hmm" label="Input model"/>
         <section name="common" title="Common parameters">
            <expand macro="common_parameters" />
         </section>
    </inputs>
    
    <outputs>
      <collection name="output_pdfs" type="list" label="${tool.name} on ${on_string}: output.pdfs">
        <discover_datasets pattern="^[a-zA-Z0-9_-]*.pdf$" format="pdf"/>
        <filter>search['type'] == 'list' or (search['type'] == 'name' and split['dosplit'] == 'yes'</filter>
      </collection>
      <collection name="output_svg" type="list" label="${tool.name} on ${on_string}: output.svgs">
        <discover_datasets pattern="^[a-zA-Z0-9_-]*.svg$" format="svg"/>
        <filter>search['type'] == 'list' or (search['type'] == 'name' and split['dosplit'] == 'yes'</filter>
      </collection>
      <collection name="output_png" type="list" label="${tool.name} on ${on_string}: output.pngs">
        <discover_datasets pattern="^[a-zA-Z0-9_-]*.png$" format="png"/>
        <filter>search['type'] == 'list' or (search['type'] == 'name' and split['dosplit'] == 'yes'</filter>
      </collection>
      <collection name="output_ps" type="list" label="${tool.name} on ${on_string}: output.ps">
        <discover_datasets pattern="^[a-zA-Z0-9_-]*.ps$" format="ps"/>
        <filter>search['type'] == 'list' or (search['type'] == 'name' and split['dosplit'] == 'yes'</filter>
      </collection>	
    </outputs>
    <tests>
      <test>
        <param name="model_filepath" value="tRNA.hmm" />
        <output name="out" file="tRNA.pdf" />
      </test>
    </tests>

    <help><![CDATA[ **HMMV -- Visualisation of Hidden Markov Models**
**Input.**
Hidden Markov Models in HMMER3 format. 

**Output.**
File in pdf,svg,png,ps format.
    
For more information, see     
.. __: https://github.com/eggzilla/cmv
    ]]></help>

    <expand macro="citations" />
    
</tool>
