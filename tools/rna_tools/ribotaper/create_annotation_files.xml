<tool id="ribotaper_create_annotation" name="ribotaper part I: creation of annotation files" version="0.1.0">
    <requirements>
            <requirement type="package" version="2.19.1">bedtools</requirement>
            <requirement type="package" version="1.2">R_dependencies</requirement>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>

    <command><![CDATA[
        $__tool_directory__/scripts/create_annotations_files.bash
            "$gtf"
            "$fa"
            "$ccdsid"
            "$appris"
            "annotation_path"
            "$__tool_directory__/bedtools_dir"
            "$__tool_directory__/scripts"
            &&
            echo "\$(pwd)/annotation_path" > "annotation_path.txt"

    ]]></command>
    <inputs>
        <param name="gtf" type="data" format="GTF" label="GTF"
               help="GTF should contain:
               1) coding and non-coding genes, 2) a 'transcript_id' and a 'gene_id' field for each 'exon' and 'CDS' row.
               "/>
        <param name="fa" type="data" format="fasta" label="Genome fasta file" help="FASTA-format, indexed and not repeat masked"/>
        <param name="ccdsid" type="boolean" falsevalue="false" truevalue="true" checked="true" label="Use ccdsid? (valid for Human Gencode 19 and Mouse Gencode M3 )"
               help="If yes, only exons/transcripts with the CCDS tag will be used as CCDS exons/transcripts, otherwise all exons/transcripts with a CDS region are going to be annotated as CCDS.
                    "/>
        <param name="appris" type="boolean" falsevalue="false" truevalue="true" checked="true" label="Use appris? (valid for Human Gencode 19 and Mouse Gencode M3 )"
               help=" If yes, only exons/transcripts with the appris tag will be used, using only 1 transcript per appris gene (the appris_principal transcript or other appris transcript). If a               gene does not have appris transcript, all the annotated transcript structures are used.
               "/>
    </inputs>
    <outputs>
        <data name="output1" format="bed" from_work_dir="annotation_path/start_stops_FAR.bed" label="start_stops_FAR"/>
        <data name="output2" format="txt" from_work_dir="annotation_path.txt" label="annotation_path"/>
    </outputs>
    <tests>
        <test>
            <param name="gtf" value="test.gtf"/>
            <param name="fa" value="test.fa"/>
            <param name="ccdsid" value="true"/>
            <param name="appris" value="true"/>
            <output name="output1" file="ORFs_genes_found"/> ??
        </test>
    </tests>
    <help><![CDATA[


]]></help>
    <citations>
        <citation type="doi">10.1038/nmeth.3688</citation>
    </citations>
</tool>
