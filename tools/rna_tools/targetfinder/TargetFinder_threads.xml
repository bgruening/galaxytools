<tool id="targetfinder_threads" name="targetfinder_threads" version="0.1.0">
    <requirements>
        <requirement type="package" version="1.07">targetfinder</requirement>
        <requirement type="package" version="35.4.12">fasta</requirement>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>

    <command><![CDATA[
        targetfinder_threads.pl
            -f $f
            -d $d
            -c $c
            -t $t
            $r
            -o $output1
    ]]></command>
    <inputs>
        <param label="Input small RNA sequences file (FASTA-format)" help="(-f)" name="f" type="data" format="fasta" />
        <param label="Target sequence database file (FASTA-format)" help="(-d)" name="d" type="data" format="fasta" />
        <param label="Prediction score cutoff value (DEFAULT = 4)" help="(-c)" name="c" type="float" value="4.0" />
        <param label="Threads for parallel Smith-Waterman searches (DEFAULT = 1)" help="(-t)" name="t" type="integer" value="1" />
        <param label="Search reverse strand for targets? Use this option if the database is genomic DNA." help="(-r)" name="r" type="boolean" falsevalue="" truevalue="-r" checked="false" />
    </inputs>
    <outputs>
        <data label="Predicted targets by targetfinder_threads"  name="output1" format="data"/>
    </outputs>
    <tests>
        <test>
            <!-- Order of predicted targets are not constant in output per run with identical parameter. -->
            <!-- This makes test fail while the wrapper actually works (external validation). -->
            <param name="f" value="ath_miRNAs_test.fa"/>
            <param name="d" value="Antirrhinum_majus.mRNA.EST.fasta"/>
            <param name="r" value=""/>
            <param name="c" value="4.0"/>
            <param name="t" value="1"/>
            <output name="output1" file="ath_miRNAs_predicted_targets.txt"/>
        </test>
    </tests>
    <help><![CDATA[
**What it does**

    targetfinder_threads: Executes parallel targetfinder jobs using Perl interpreter threads.

**ATTRIBUTION**

    This Galaxy tool relies on targetfinder_threads from  `carringtonlab/TargetFinder_threads
    <https://github.com/carringtonlab/TargetFinder_threads.git>`_, developed by Noah Fahlgren

    ]]></help>
    <citations>
        <citation type="doi">10.1016/j.cell.2005.04.004</citation>
        <citation type="doi">10.1371/journal.pone.0000219</citation>
        <citation type="doi">10.1007/978-1-60327-005-2_4</citation>
    </citations>
</tool>