<tool id="minHashTool" name="MinHash approx k-neighbors" version="0.1">
  <description>approximate k-neighbors computation for sparse datasets</description>
  <command>
    <![CDATA[
    python "$minHash_script" '$inputs'
    ]]>
  </command>
  <configfiles>
    <inputs name="inputs" />
    <configfile name="minHash_script">
      <![CDATA[
from bioinf_learn import MinHash
import sys
from numpy import savetxt
import json
from scipy.io import mmread

input_json_path = sys.argv[1]
sys.stderr.write("FOOO: " + sys.argv[0] +" GOOOO" + sys.argv[1])
input_json_raw = open(input_json_path, 'r')
params = json.load(input_json_raw)
# options = params["inputs"]["algorithm_options"]
data_matrix = mmread(sys.argv[1])
minHash = MinHash()
dist, indices = minHash.fit_kneighbors(data_matrix)
savetxt("dist.csv", dist, fmt='%f')
savetxt("indices.csv", indices, fmt='%i')
      ]]>
    </configfile>
  </configfiles>
  <inputs>
    <param format="mtx" name="input" type="data" label="Source file"/>
    <!--parameter list for minhash-->
    <!--<param name="algorithm_options"/>-->
  </inputs>
  <outputs>
    <data format="txt" name="dist" />
    <data format="txt" name="indices" />
    
  </outputs>


  <help>
This tool computes the approximate k-nearest neighbors and works only on sparse datasets.
  </help>

</tool>