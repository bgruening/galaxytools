<tool id="racon" name="Consensus module for raw de novo DNA assembly of long uncorrected reads." version="0.1.0">
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements" />
    <command detect_errors="exit_code"><![CDATA[
        racon reads.fa overlaps.sam corrected-reads.fa
    ]]></command>
    <inputs>
        <param type="data" name="input1" format="fasta" />
        <param type="data" name="input2" format="sam" />
    </inputs>
    <outputs>
        <data name="output1" format="fa" from_work_dir="test-data/reads-corrected.fa" />
    </outputs>
    <tests>
        <test>
            <param name="input1" value="test-data/reads.fasta"/>
            <param name="input2" value="test-data/overlaps.sam"/>
            <output name="output1" file="test-data/reads-corrected.fa"/>
        </test>
    </tests>
    <help><![CDATA[
        usage: racon [options ...] <sequences> <overlaps> <target sequences>

    <sequences>
        input file in FASTA/FASTQ format (can be compressed with gzip)
        containing sequences used for correction
    <overlaps>
        input file in MHAP/PAF/SAM format (can be compressed with gzip)
        containing overlaps between sequences and target sequences
    <target sequences>
        input file in FASTA/FASTQ format (can be compressed with gzip)
        containing sequences which will be corrected

    options:
        -u, --include-unpolished
            output unpolished target sequences
        -f, --fragment-correction
            perform fragment correction instead of contig polishing
            (overlaps file should not contain dual/self overlaps!)
        -w, --window-length <int>
            default: 500
            size of window on which POA is performed
        -q, --quality-threshold <float>
            default: 10.0
            threshold for average base quality of windows used in poa
        -e, --error-threshold <float>
            default: 0.3
            maximum allowed error rate used for filtering overlaps
        -m, --match <int>
            default: 5
            score for matching bases
        -x, --mismatch <int>
            default: -4
            score for mismatching bases
        -g, --gap <int>
            default: -8
            gap penalty (must be negative)
        -t, --threads <int>
            default: 1
            number of threads
        --version
            prints the version number
        -h, --help
            prints the usage

    ]]></help>
    <expand macro="citations" />
</tool>