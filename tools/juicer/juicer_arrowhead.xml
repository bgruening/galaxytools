<tool id="Juicer_arrowhead" name="Arrowhead" version="0.1.0">

    <description>Annotating Contact Domains</description>

    <requirements>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <command>
      <![CDATA[
          java -jar juicebox_tools.7.0.jar
            arrowhead
            '$HiC_files'
            '$outputfile'
            #if $adv.r
                -r $adv.r
            #end if
            #if $adv.m
                -m $adv.m
            #end if
            #if $adv.c
                -c $adv.c
            #end if
            #if $adv.k
                -k $adv.k
            #end if

      ]]></command>
    <inputs>
        <param type="data" name="HiC_files" multiple="true" label="HiC file(s)" format="hic">
            <help>
              <![CDATA[
              "Address of HiC file(s) which should end with ".hic". This is the file you will load into Juicebox. URLs or local addresses may be used."
              ]]>
            </help>
        </param>
        <section name="adv" title="Advanced Options">
            <param argument="-r" type="integer" optional="True"
              label="Resolution for which Arrowhead will be run." value="10000"
              help="Generally, 5kB (5000) or 10kB (10000) resolution is used depending on the depth of sequencing in the HiC file(s)." />
            <param argument="-m" type="integer" optional="True"
              label="Size of the sliding window along the diagonal in which contact domains will be found." value="2000"
              help="It must be an even number as (m/2) is used as the increment for the sliding window. (Default 2000)" />
            <param argument="-c" type="text" optional="True" label="Chromosomes(s) on which Arrowhead will be run." value="">
                <help>
                  <![CDATA[
                  "The number/letter for the chromosome can be used with or without appending the "chr" string. Multiple chromosomes can be specified using commas (e.g. 1,chr2,X,chrY)"
                  ]]>
                </help>
            </param>
            <param name="-k" type="select" label="Normalization" help="Normalizations that can be selected. Generally, KR (Knight-Ruiz) balancing should be used when available. ">
                <option value="KR" selected="true">KR</option>
                <option value="">None</option>
                <option value="VC">VC</option>
                <option value="VC_SQRT">VC_SQRT</option>
            </param>
        </section>
    </inputs>
    <outputs>
        <collection name="output" type="list" label="Results">
            <discover_datasets pattern="(?P&lt;designation&gt;.+)\.*" format="*" directory="output_dir" />
        </collection>
    </outputs>
    <tests>
        <test>
            <param name="Hic_files" value="test-data/HIC006.hic" ftype="hic" />
            <param name="output" value="XXXXXXXXXX" ftype="XXX" />
        </test>
    </tests>
    <help><![CDATA[
        **Juicer** is a platform for analyzing kilobase resolution Hi-C data. In this distribution, we include the pipeline for generating Hi-C maps from fastq raw data files and command line tools for feature annotation on the Hi-C maps.
    ]]></help>
</tool>
