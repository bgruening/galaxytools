<tool id="juicer_motifs" name="Finding CTCF motifs" version="0.1.0">
    <requirements>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <command><![CDATA[
    mkdir -p bed_file_dir/unique
    &&
    mkdir bed_file_dir/inferred
    &&
    #if $unique_rad21 is not None:
        #for $file in $unique_rad21:
            ln -s '$file' bed_file_dir/unique
        #end for
    #end if
    &&
    #if $unique_smc3 is not None:
        #for $file in $unique_smc3:
            ln -s '$file' bed_file_dir/unique
        #end for
    #end if
    &&
    #if $unique_ctcf is not None:
        #for $file in $unique_ctcf:
            ln -s '$file' bed_file_dir/unique
        #end for
    #end if
    &&
    #if $inferred_rad21 is not None:
        #for $file in $inferred_rad21:
            ln -s '$file' bed_file_dir/inferred
        #end for
    #end if
    &&
    #if $inferred_smc3 is not None:
        #for $file in $inferred_smc3:
            ln -s '$file' bed_file_dir/inferred
        #end for
    #end if
    &&
    #if $inferred_ctcf is not None:
        #for $file in $inferred_ctcf:
            ln -s '$file' bed_file_dir/inferred
        #end for
    #end if
    &&
    java -jar juicebox_tools.7.0.jar motifs "$genomeID" bed_file_dir "$looplist" "$custom_global_motif_list"
    && 
    rm -rf bed_file_dir
        
    ]]></command>
    <inputs>
        <param name="genomeID" type="data" format="fifo" label="Genome" value="" optional="True" 
        help="Genome hg19 supported by default. For other genome assemblies, provide a custom_global_motif_list in FIMO format."/>
        <section name="input_files_unique" title="BED files unique" expanded="True" help="By intersecting these 1D tracks, the strongest peaks will be identified.">
            <param name="unique_rad21" type="data" multiple="True" format="bed"  optional="True"  label="RAD21"/>
            <param name="unique_smc3" type="data" multiple="True" format="bed"   optional="True" label="SMC3"/>
            <param name="unique_ctcf" type="data" multiple="True" format="bed"  optional="True"  label="CTCF"/>
        </section>
        <section name="input_files_inferred" title="BED files inferred" expanded="True" help="By intersecting these 1D tracks, the strongest peaks will be identified.">
            <param name="inferred_rad21" type="data" multiple="True" format="bed"  optional="True" label="RAD21"/>
            <param name="inferred_smc3" type="data" multiple="True" format="bed"  optional="True" label="SMC3"/>
            <param name="inferred_ctcf" type="data" multiple="True" format="bed"  optional="True" label="CTCF"/>
        </section>
        <param name="looplist" type="data" format="txt"   optional="True"  label="List of peaks" help="List of peaks in standard 2D feature format (chr1 x1 x2 chr2 y1 y2 color ...)"/>
        <section name="advanced_options" title="Advanced options" expanded="False" >
            <param name="custom_global_motif_list" type="data" value="" format="fifo"   optional="True" label="Motif list" help="Motif list output using FIMO format can be used as an alternative to the internal motif list"/>
        </section>
    </inputs>
    <outputs>
        <data format="txt" name="motifs" />
    </outputs>
    <help><![CDATA[
    ]]></help>
</tool>