<tool id="gfastats" name="gfastats" version="@TOOL_VERSION@+galaxy@SUFFIX_VERSION@" profile="20.01">
    <description>the swiss army knife for genome assembly</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements" />
    <expand macro="biotools"/>
    <version_command>gfastats --version</version_command>
    <command detect_errors="exit_code"><![CDATA[
        gfstats
        $input_file
        #if $expected_genomesize
            $expected_genomesize
        #end if
        #if $target_sequence
            #if $coordinates
                $target_sequence:$coordinates
            #else
                $target_sequence
            #end if
        #end if
        -o $output_format$gz
        #if $output_format == 'FASTA'
            #if $line_length
                --line-length $line_length
            #end if
        #end if
        -s $output_size
        -b $out_coord
        #if $include_bed
            -i $include_bed
        #end if
        #if $exclude_bed
            -e $exclude_bed
        #end if
        $tabular_output
        --stats 
        $seq_report
        #if $seq_report
            $out_sequence
        #end if
        $nstar_report
        #if $swiss_army
            -k $swiss_army
        #end if
        --verbose
        --cmd

    ]]></command>
    <inputs>
        <param 
            name="input_file" 
            argument="--fasta" 
            type="data"
            format="fasta,fastq,fastqsanger,gfa,fasta.gz,fastq.gz,fastqsanger.gz,gfa.gz"
            label="Input file"
        />
        <param 
            argument="--swiss-army-knife" 
            type="data" format="txt" 
            label="SAK input file"
            help=" set of instructions provided as an ordered list"
        />
        #############
        # BED OPTIONS
        #############
        <section 
            name="bed_options" 
            title="BED parameters" 
            expanded="True">
            <param 
                argument="--size"
                type="boolean"
                truevalue="-"
                falsevalue=""
                checked="false"
                label="Output sequence sizes"
                help="Generate a tabular file with the sequence sices" />
            <param 
                argument="--output_coord" 
                type="select"
                label="BED coordinares fueature"
                help="Generates bed coordinates of given feature. Default: agp">
                <option
                    value="agp">AGP
                </option>
                <option
                    value="contigs">Contigs
                </option>
                <option
                    value="gaps">Gaps
                </option>
            </param>
            <param 
                argument="--include-bed"
                type="data"
                format="bed"
                label="Specify intervals"
                optional="true"
                help="Generates output on a subset list of headers or coordinates   
                    in 0-based bed format. It can be combined with --exclude-bed. Optional" 
            />
            <param 
                argument="--exclude-bed"
                type="data" format="bed"
                optional="true"
                label="Exclude specific intervals"
                help="Exclude a subset of headers or coordinates in 0-base bed format. It can
                    be conmbined with --include-bed Optional" 
            />
        </section>
        ################
        # OUTPUT OPTIONS
        ################
        <section
            name="output_section" 
            title="Output parameteres"
            expand="true">
            <conditional 
                name="condition_output">
                <param 
                    argument="--output-format"
                    type="select" 
                    label="Output format" help="Outputs selected sequences. If more than the extension \
                        is provided the output is written to the specified file (e.g. out.fasta.gz).">
                        <option value="fasta">FASTA</option>
                        <option value="fastq">FASTQ</option>
                        <option value="gfa">GFA</option>
                </param>
                <when 
                    value="fasta">
                    <expand 
                        macro="compression_option"
                    />
                    <param 
                        argument="--line-length"
                        type="integer"
                        min="0"
                        max="80"
                        value=""
                        optional="true"
                        label="Especify line length"
                        help="Specifies line length in when output format is fasta. Default has no \
                            line breaks."
                    />
                </when>
                <when 
                    value="fastq">
                    <expand 
                        macro="compression_option"
                    />
                </when>
                <when 
                    value="gfa">
                    <expand 
                        macro="compression_option"
                    />
                </when>
            </conditional>
            <param 
                argument="--tabular"
                type="boolean"
                truevalue="--tabular"
                falsevalue=""
                checked="false"
                label="Tabular-format output"
                help="Generate output in tabular format"
            />
            <conditional
                name="report_condition">
                <param 
                    argument="--seq-report"
                    type="select"
                    label="Sequence report"
                    help="Report statistics for each sequence">
                    <option
                        value="true">Enabled 
                    </option>
                    <option
                        value="false">Disabled
                    </option>
                </param>
                <when 
                    value="true">
                    <param 
                        argument="--seq-report"
                        type="boolean"
                        truevalue="--seq-report"
                        falsevalue=""
                        checked="false"
                        label="Sequence report"
                        help="Report statistics for each sequence"
                    />
                </when>
                <when 
                    value="false"
                />
            </conditional>
            <param 
                argument="--nstar-report"
                type="boolean"
                truevalue="--nstar-report"
                falsevalue=""
                checked="false"
                label="NSTAR report"
                help="generates full N* and L* statistics"
            />
     </inputs>
    <outputs>

    </outputs>
    <tests>   
        # Test Nummer eins   
        <test expect_num_outputs="">
            <!--TODO: auto-generated test case. Please fill in the required values-->
            <param 
                name="input_file" value=""/>
            <param name="swiss_army_knife" value=""/>
            <section name="bed_options">
                <param name="size" value="false"/>
                <param name="output_coord" value="agp"/>
                <param name="include_bed" value=""/>
                <param name="exclude_bed" value=""/>
            </section>
            <section name="output_section">
                <param name="tabular" value="false"/>
                <param name="nstar_report" value="false"/>
            </section>
        </test>
        # Test Nummer zwei
        <test expect_num_outputs="">
            <!--TODO: auto-generated test case. Please fill in the required values-->
            <param name="input_file" value=""/>
            <param name="swiss_army_knife" value=""/>
            <section name="bed_options">
                <param name="size" value="false"/>
                <param name="output_coord" value="agp"/>
                <param name="include_bed" value=""/>
                <param name="exclude_bed" value=""/>
            </section>
            <section name="output_section">
                <param name="tabular" value="false"/>
                <param name="nstar_report" value="false"/>
            </section>
        </test>
        # Test Nummer drei
        <test expect_num_outputs="">
            <!--TODO: auto-generated test case. Please fill in the required values-->
            <param name="input_file" value=""/>
            <param name="swiss_army_knife" value=""/>
            <section name="bed_options">
                <param name="size" value="false"/>
                <param name="output_coord" value="agp"/>
                <param name="include_bed" value=""/>
                <param name="exclude_bed" value=""/>
            </section>
            <section name="output_section">
                <param name="tabular" value="false"/>
                <param name="nstar_report" value="false"/>
            </section>
        </test>
    </tests>
    <help><![CDATA[

.. class:: infomark

**Purpose**

Hello, world!

  ]]></help>
    <expand macro="citations" />
</tool>
