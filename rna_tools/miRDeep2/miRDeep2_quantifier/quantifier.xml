<tool id="rbc_mirdeep2_quantifier" name="MiRDeep2 Quantifier" version="2.0.0">
    <macros>
        <macro name="">
        </macro>
    </macros>
    <description>
<![CDATA[
fast quantitation of reads mapping to known miRBase precursors
]]>
    </description>
    <requirements>
        <requirement type="package" version="2.0">mirdeep2_quantifier</requirement>
        <requirement type="package" version="0.12.7">bowtie</requirement>
        <requirement type="package" version="5.18.1">perl</requirement>
        <requirement type="package" version="1.8">vienna_rna</requirement>
        <requirement type="package" version="2.023">pdf_api2</requirement>
    </requirements>

    <command>
<![CDATA[
]]>
    </command>
    <stdio>
        <!-- Anything other than zero is an error -->
        <exit_code range="1:" />
        <exit_code range=":-1" />
        <!-- In case the return code has not been set propery check stderr too -->
        <regex match="Error:" />
        <regex match="Exception:" />
    </stdio>
    <inputs>
        <param name="reads" format="fasta" type="data" optional="false" label="Deep sequencing reads" help="(Collapsed?)Reads in fasta format. (-r)"/>
        <param name="precursors" format="fasta" type="data" optional="false" label="Precursor sequences" help="miRNA precursor sequences from miRBase. (-p)"/>
        <param name="mature" format="fasta" type="data" optional ="false" label="Mature miRNA sequences" help="Mature miRNA sequences from miRBase. (-m)"/>
        
        <conditional name="cond_star_seq">
            <param name="inc_star_seq" type="boolean" checked="false" truevalue="-s" falsevalue="" label="Include star sequences from miRBase" help="(-s)"/>
            <when value="-s">
                <param name="star_sequences" format="fasta" type="data" optional="false" label="Star sequences" help="From miRBase in fasta format"/>
            </when>
            <when value="" />
        </conditional>
    </inputs>
    <outputs>
    </outputs>
    <tests>
        <test>
        </test>
    </tests>
    <help>
<![CDATA[
**What MiRDeep2 Quantifier does**

The module maps the deep sequencing reads to predefined miRNA precursors and determines by that the expression of the corresponding miRNAs. 
First, the predefined mature miRNA sequences are mapped to the predefined precursors. Optionally, predefined star sequences can be mapped to the precursors too. 
By that the mature and star sequence in the precursors are determined. Second, the deep sequencing reads are mapped to the precursors. 
The number of reads falling into an interval 2nt upstream and 5nt downstream of the mature/star sequence is determined.
]]>
    </help>
    <citations>
        <citation type="doi">10.1093/nar/gkr688</citation>
        <citation type="doi">10.1002/0471250953.bi1210s36</citation>
    </citations>
</tool>
