<tool id="rbc_mirdeep2" name="MiRDeep2" version="2.0.0">
    <description>
<![CDATA[
fast quantitation of reads mapping to known miRBase precursors
]]>
    </description>
    <requirements>
        <requirement type="package" version="2.0">mirdeep2</requirement>
        <requirement type="package" version="2.0">mirdeep2_quantifier</requirement>
        <requirement type="package" version="0.12.7">bowtie</requirement>
        <requirement type="package" version="5.18.1">perl</requirement>
        <requirement type="package" version="1.8.5">vienna_rna</requirement>
        <requirement type="package" version="2.023">pdf_api2</requirement>
        <requirement type="package" version="2.0">randfold</requirement>
    </requirements>

    <command>
<![CDATA[
    miRDeep2.pl
]]>
    </command>
    <stdio>
        <!-- Anything other than zero is an error -->
        <exit_code range="1:" />
        <exit_code range=":-1" />
        <!-- In case the return code has not been set propery check stderr too -->
        <regex match="Error:" />
        <regex match="Exception:" />
    </stdio>
    <inputs> <!--
        <param name="reads" format="fasta" type="data" label="Deep sequencing reads" help="(Collapsed?)Reads in fasta format. (-r)"/>
        <param name="precursors" format="fasta" type="data" label="Precursor sequences" help="miRNA precursor sequences from miRBase. (-p)"/>
        <param name="mature" format="fasta" type="data" label="Mature miRNA sequences" help="Mature miRNA sequences from miRBase. (-m)"/>
        <param name="species" type="select" label="Search in species" help="If not searching in a specific species all species in your files will be analyzed. (-t)">
            <option value="all">All species</option>
            <option value="tni">tetraodon</option>
            <option value="dps">d.pseudoobscura</option>
            <option value="dya">d.yakuba</option>
            <option value="ame">a.mellifera</option>
            <option value="dmo">d.mojavensis</option>
            <option value="cel">worm</option>
            <option value="aga">a.gambiae</option>
            <option value="cbr">c.briggsae</option>
            <option value="cin">c.intestinalis</option>
            <option value="mmu">mouse</option>
            <option value="xtr">x.tropicalis</option>
            <option value="eca">horse</option>
            <option value="cfa">dog</option>
            <option value="fru">fugu</option>
            <option value="bta">cow</option>
            <option value="der">d.erecta</option>
            <option value="dgr">d.grimshawi</option>
            <option value="gga">chicken</option>
            <option value="spu">s.purpuratus</option>
            <option value="bfl">lancelet</option>
            <option value="ptr">chimp</option>
            <option value="dse">d.sechellia</option>
            <option value="dpe">d.persimilis</option>
            <option value="dvi">d.virilis</option>
            <option value="rno">rat</option>
            <option value="dme">d.melanogaster</option>
            <option value="lca">cat</option>
            <option value="sja">c.japonica</option>
            <option value="dan">d.ananassae</option>
            <option value="hsa">human</option>
            <option value="dsi">d.simulans</option>
        </param>
        <conditional name="cond_star_seq">
            <param name="inc_star_seq" type="boolean" checked="false" truevalue="-s" falsevalue="" label="Include star sequences from miRBase" help="(-s)"/>
            <when value="-s">
                <param name="star_sequences" format="fasta" type="data" optional="false" label="Star sequences" help="From miRBase in fasta format"/>
            </when>
            <when value=""/>
        </conditional>
        -->
        
    </inputs>
    <outputs><!--
        <data name="miRNAsExpressed" format="tabular" from_work_dir="miRNAs_expressed_all_samples_galaxy.csv" label="output of ${tool.name} on ${on_string}"/>
        <data format="html" name="html" label="${tool.name} on ${on_string} (html report)"/> -->
    </outputs>
    <tests>
        <test><!--
            <param name="reads" value="reads_collapsed.fa"/>
            <param name="precursors" value="precursors_ref_this_species.fa"/>
            <param name="mature" value="mature_ref_this_species.fa"/>
            <param name="species" value="cel"/>
            <param name="inc_star_seq" value=""/>
            <output name="miRNAsExpressed" file="miRNAs_expressed_all_samples.csv"/>
            <output name="html" file="expression_galaxy.html"/>-->
        </test>
    </tests>
    <help>
<![CDATA[
**What MiRDeep2 does**

MiRDeep2 is a software package for identification of novel and known miRNAs in deep sequencing data. Furthermore, it can be used for miRNA expression profiling across samples.
]]>
    </help>
    <citations>
        <citation type="doi">10.1093/nar/gkr688</citation>
        <citation type="doi">10.1002/0471250953.bi1210s36</citation>
    </citations>
</tool>
